$brand-primary: rgb(0, 136, 238);
$brand-success: rgb(17, 204, 119);
$brand-error: rgb(255, 85, 34);

$gray-dark: #3d464d;
$gray: #47525d;
$gray-light: #7b8994;
$gray-lighter: lighten($gray-light, 30%);

$button-styles: (
  primary: $brand-primary,
  success: $brand-success,
  error: $brand-error
);

$border-radius: 5px;

$transition: 0.1s ease-in-out;

@import "emoji-picker";

@mixin checkerboard($color-1: white, $color-2: darken(white, 2%), $size: 1.5rem) {
  $half: $size / 2;
  background-color: $color-1;
  background-image:
    linear-gradient(45deg, $color-2 25%, transparent 25%, transparent 75%, $color-2 75%, $color-2),
    linear-gradient(45deg, $color-2 25%, transparent 25%, transparent 75%, $color-2 75%, $color-2);
  background-size: $size $size;
  background-position:0 0, $half $half;
}

* {
  box-sizing: border-box;
}

body {
  @include checkerboard;
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  line-height: 1.5;
  color: $gray-dark;
}

.button {
  appearance: none;
  border: 2px solid;
  font-weight: bold;
  line-height: 2rem;
  padding: 0 0.5rem;
  display: inline-block;
  background: none;
  font-size: 1rem;
  border-radius: $border-radius;
  cursor: pointer;
  outline: 0;

  &:disabled {
    cursor: not-allowed;
    pointer-events: none;
    opacity: 0.5;
  }

  &.big {
    line-height: 3rem;
    width: 100%;
  }

  &.white {
    color: white;
    border: 0;
    background-color: $gray-dark;

    &:hover {
      background-color: white;
      color: $brand-primary;
      border-color: white;
    }
  }

  @each $name, $color in $button-styles {
    &.#{$name} {
      color: $color;

      &:hover {
        background-color: $color;
        color: white;
        border-color: $color;
      }

      &:focus {
        box-shadow: 0 0 0 1px white, 0 0 0 3px $color;
      }
    }
  }
}

.form-group {
  margin-top: 3rem;
}

.label {
  color: white;
  font-size: 0.8rem;
  font-weight: bold;
}

.input {
  appearance: none;
  border: 2px solid white;
  color: white;
  padding: 0.25rem 0.5rem;
  border-radius: $border-radius;
  background: none;
  display: block;
  line-height: 2;
  width: 100%;
  outline: 0;
  font-size: 1rem;
  margin: 0.25rem 0 0;

  &:focus {
    background-color: white;
    color: $gray-dark;
  }

  &::placeholder {
    color: rgba(white, 0.5);
  }
}

.slider {
  display: block;
  width: 100%;
  appearance: none;
  outline: 0;
  margin: 1.5rem 0 0;

  &::-webkit-slider-thumb {
    $size: 2rem;
    appearance: none;
    border-radius: $size / 2;
    width: $size;
    height: $size;
    margin-top: -($size / 2);
    background-color: white;
    cursor: ew-resize;
  }

  &::-webkit-slider-runnable-track {
    height: 2px;
    width: 100%;
    background-color: white;
  }
}

.loader {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate3d(-50%, -50%, 0);
}

.new-image {
  @include checkerboard($color-1: $brand-primary, $color-2: darken($brand-primary, 1%));
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: auto;
}

.dropzone {
  padding: 3rem;
  border: 2px dashed;
  color: white;
  border-radius: $border-radius;
  text-align: center;
  font-weight: bold;

  &.is-active {
    background-color: rgba(white, 0.3);
    border-style: solid;
  }
}

.new-image__form {
  width: 30rem;
  margin: 0 auto 3rem;
  position: relative;
  z-index: 1;
}

.new-image__preview {
  display: flex;
  justify-content: center;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
}

.image__container {
  display: inline-block;
  position: relative;
  margin-bottom: 4rem;

  .new-image & {
    opacity: 0.2;
    filter: blur(10px);
  }
}

.image__element {
  max-width: 100%;
}

.pips {
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;

  &.can-add {
    cursor: crosshair;
  }
}

.pip__container {
  position: absolute;
  transform: translate3d(-50%, -50%, 0);

  &.is-selected {
    z-index: 9;
  }
}

.pip {
  cursor: default;
  position: absolute;
  transform: translate3d(-50%, -50%, 0);
  text-shadow: 0 3px 10px rgba(black, 0.3);
  user-select: none;

  .is-adding-pips & {
    filter: grayscale(100%);
  }

  .is-current & {
    filter: grayscale(0%);
    cursor: pointer;
  }
}

.emoji {
  font-size: 2rem;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate3d(-50%, -50%, 0);
}

.footer {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background-color: white;
  padding: 1rem;
  transition: $transition;
  z-index: 99;

  &:hover {
    transform: translateY(0);
  }
}

.lifespan {
  $height: 0.5rem;
  transition: $transition;
  height: $height;
  position: absolute;
  top: (-$height);
  right: 0;
  left: 0;
  background-color: $gray-lighter;

  &.is-expired {
    background-color: $brand-error;
  }
}

.lifespan__fill {
  background-color: $brand-primary;
  height: inherit;

  .is-expired & {
    display: none;
  }
}

.image__title {
  margin: 0;
  font-size: 1.2rem;
  display: inline-block;
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate3d(-50%, -50%, 0);
}
