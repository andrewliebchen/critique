<head>
  <title>Critique</title>
  <script type="text/javascript"
    src="https://www.dropbox.com/static/api/2/dropins.js"
    id="dropboxjs"
    data-app-key="lfhonqf66tf5ppw">
  </script>
</head>

<template name="application">
  {{>yield}}
</template>

<template name="loading">
  Its loading, fool.
</template>

<template name="home">
  <div class="home-content">
    <h1>Critique</h1>
    {{>dropboxChooser}}
    <p>Mauris iaculis porttitor posuere. Praesent id metus massa, ut blandit odio. Proin quis tortor orci. Etiam.</p>
  </div>
</template>

<template name="index">
  <div class="index-content">
    {{>image}}
    <!-- {{>dropboxChooser}} -->
  </div>
</template>

<template name="image">
  <div class="image">
    {{#each image}}
      {{#if image}}
        {{#unless expired}}
          <header class="image-header">
            {{>placemarkToggle}}
            <strong class="image-title">{{name}}</strong>
            {{>countdown}}
            <!-- <span class="image-expiration">Expires {{timeLeft}} ({{expiration}}).</span> -->
            <!-- <button class="button mtr_delete-image">Delete image</button> -->
          </header>
          <div class="image-container">
            {{>placemarks}}
            <img src="{{link}}">
          </div>
        {{else}}
          <p>Image expired at {{expiration}}</p>
        {{/unless}}
        <button class="button button-large add-image">Add another image</button>
      {{/if}}
    {{/each}}
  </div>
</template>

<template name="countdown">
  <div class="countdown">
    <span class="countdown__value hours">4</span>
    <span class="countdown__spacer">:</span>
    <span class="countdown__value minute_tens">0</span>
    <span class="countdown__value minute_ones">0</span>
    <span class="countdown__spacer">:</span>
    <span class="countdown__value second_tens">0</span>
    <span class="countdown__value second_ones">0</span>
  </div>
</template>

<template name="placemarkToggle">
  <div class="placemark-toggle">
    <a class="placemark-toggle__item is-selected">{{>iconPin}}</a>
    <a class="placemark-toggle__item">{{>iconArea}}</a>
    <a class="placemark-toggle__item">{{>iconOkay}}</a>
    <a class="placemark-toggle__item">{{>iconThumbsDown}}</a>
  </div>
</template>

<template name="placemarks">
  <div class="placemarks mtr_add-placemark">
    {{#each placemark}}
      <div class="placemark mtr_placemark{{#if selected}} is-selected{{/if}}"
        style="top:{{top}}px; left:{{left}}px;">
        {{#if selected}}
          {{>comments}}
        {{/if}}
      </div>
    {{/each}}
  </div>
</template>

<template name="comments">
  <div class="comments">
    {{#each comment}}
      <div class="comment">
        <h3>{{name}}</h3>
        <p>{{message}}</p>
      </div>
    {{/each}}
    {{>newComment}}
  </div>
</template>

<template name="newComment">
  <div class="new-comment">
    <fieldset>
      <label>Your name</label>
      <input type="text" class="mtr_user">
    </fieldset>
    <fieldset>
      <label>Your comment</label>
      <textarea class="mtr_message"></textarea>
    </fieldset>
    <button class="button mtr_add-comment">Add comment</button>
  </div>
</template>

<template name="dropboxChooser">
  <button type="button" class="button button-large" id="mtr_dropbox">Click here to Choose Dropbox Files</button>
</template>
