<head>
  <title>Critique</title>
  <script type="text/javascript"
    src="https://www.dropbox.com/static/api/2/dropins.js"
    id="dropboxjs"
    data-app-key="lfhonqf66tf5ppw">
  </script>
</head>

<template name="application">
  {{>yield}}
</template>

<template name="loading">
  Its loading, fool.
</template>

<template name="home">
  <div class="home-content">
    <h1>Critique</h1>
    {{>dropboxChooser}}
    <p>Mauris iaculis porttitor posuere. Praesent id metus massa, ut blandit odio. Proin quis tortor orci. Etiam.</p>
  </div>
</template>

<template name="index">
  <div class="index-content">
    {{>image}}
    <!-- {{>dropboxChooser}} -->
  </div>
</template>

<template name="image">
    {{#each image}}
      {{#if image}}
        <div class="image">
          {{#unless expired}}
            <header class="image-header">
              {{>placemarkToggle}}
              <h2 class="image-title">Image title</h2>
              <span class="image-expiration">Expires {{timeLeft}} ({{expiration}}).</span>
              <!-- <button class="button mtr_delete-image">Delete image</button> -->
            </header>
            <div class="image-container">
              {{>placemarks}}
              <img src="{{link}}">
            </div>
          {{else}}
            <p>Image expired at {{expiration}}</p>
          {{/unless}}
        </div>
      {{/if}}
    {{/each}}
</template>

<template name="placemarkToggle">
  <div class="placemark-toggle">
    <a class="placemark-toggle__item is-selected">{{>iconPin}}</a>
    <a class="placemark-toggle__item">{{>iconArea}}</a>
    <a class="placemark-toggle__item">{{>iconOkay}}</a>
    <a class="placemark-toggle__item">{{>iconThumbsDown}}</a>
  </div>
</template>

<template name="placemarks">
  <div class="placemarks mtr_add-placemark">
    {{#each placemark}}
      <div class="placemark mtr_placemark{{#if selected}} is-selected{{/if}}"
        style="top:{{top}}px; left:{{left}}px;">
        {{#if selected}}
          {{>comments}}
        {{/if}}
      </div>
    {{/each}}
  </div>
</template>

<template name="comments">
  <div class="comments">
    {{#each comment}}
      <div class="comment">
        <h3>{{name}}</h3>
        <p>{{message}}</p>
      </div>
    {{/each}}
    <div class="new-comment">
      <input type="text" class="mtr_user">
      <textarea class="mtr_message"></textarea>
      <button class="mtr_add-comment">Add comment</button>
    </div>
  </div>
</template>

<template name="dropboxChooser">
  <button type="button" class="button button-large" id="mtr_dropbox">Click here to Choose Dropbox Files</button>
</template>
