<head>
  <title>Critique</title>
  <script type="text/javascript"
    src="https://www.dropbox.com/static/api/2/dropins.js"
    id="dropboxjs"
    data-app-key="lfhonqf66tf5ppw">
  </script>
</head>

<template name="application">
  {{>yield}}
</template>

<template name="loading">
  Its loading, fool.
</template>

<template name="home">
  {{>dropboxChooser}}
</template>

<template name="index">
  {{>image}}
  {{>comments}}
  {{>dropboxChooser}}
</template>

<template name="image">
    {{#each image}}
      {{#if image}}
        {{#unless expired}}
          <p>Expires {{timeLeft}} ({{expiration}}).</p>
          <button class="mtr_delete-image">Delete image</button>
          <div class="image-container">
            {{>placemarks}}
            <img src="{{link}}" class="mtr_add-placemark">
          </div>
        {{else}}
          <p>Image expired at {{expiration}}</p>
        {{/unless}}
      {{/if}}
    {{/each}}
</template>

<template name="placemarks">
  <div class="placemarks">
    {{#each placemark}}
      <div class="placemark mtr_placemark{{#if active}} is-active{{/if}}"
        style="top:{{top}}px; left:{{left}}px;">
        {{commentCount}}
      </div>
    {{/each}}
  </div>
</template>

<template name="comments">
  <div class="comments">
    {{#each comment}}
      <div class="comment">
        <h3>{{name}}</h3>
        <p>{{message}}</p>
      </div>
    {{/each}}
    <div class="new-comment">
      <input type="text" class="mtr_user">
      <textarea class="mtr_message"></textarea>
      <button class="mtr_add-comment">Add comment</button>
    </div>
  </div>
</template>

<template name="dropboxChooser">
  <button type="button" id="mtr_dropbox">Click here to Choose Dropbox Files</button>
</template>
